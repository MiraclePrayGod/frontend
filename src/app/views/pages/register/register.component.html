<div class="register-container">
  <c-container>
    <c-row class="justify-content-center">
      <c-col lg="6" md="8" xl="5">
        <c-card class="register-card">
          <c-card-body class="p-4 p-lg-5">
            <form cForm (ngSubmit)="onSubmit()" class="register-form">
              <div class="text-center mb-4">
                <h1 class="register-title">Create Account</h1>
                <p class="register-subtitle">Join our community today</p>
              </div>

              <!-- Username Field -->
              <c-input-group class="mb-3 input-field">
                <span cInputGroupText class="input-icon">
                  <svg cIcon name="cilUser"></svg>
                </span>
                <input
                  [(ngModel)]="user.name"
                  name="name"
                  autoComplete="name"
                  cFormControl
                  placeholder="Username"
                  required
                  class="input-control"
                />
              </c-input-group>

              <!-- Email Field -->
              <c-input-group class="mb-3 input-field">
                <span cInputGroupText class="input-icon">
                  <svg cIcon name="cilEnvelopeOpen"></svg>
                </span>
                <input
                  [(ngModel)]="user.email"
                  name="email"
                  autoComplete="email"
                  cFormControl
                  placeholder="Email"
                  type="email"
                  required
                  class="input-control"
                />
              </c-input-group>

              <!-- Password Field -->
              <c-input-group class="mb-3 input-field">
                <span cInputGroupText class="input-icon">
                  <svg cIcon name="cilLockLocked"></svg>
                </span>
                <input
                  [(ngModel)]="user.password"
                  name="password"
                  (input)="checkPasswordStrength(); checkPasswordMatch()"
                  autoComplete="new-password"
                  cFormControl
                  placeholder="Password"
                  type="password"
                  required
                  class="input-control"
                />
              </c-input-group>

              <!-- Password Strength Meter -->
              <div class="password-strength mb-3" *ngIf="user.password">
                <div class="strength-meter">
                  <div class="strength-bar" [style.width.%]="passwordStrength"
                       [class.weak]="passwordStrength <= 40"
                       [class.medium]="passwordStrength > 40 && passwordStrength <= 80"
                       [class.strong]="passwordStrength > 80"></div>
                </div>
                <small class="strength-text">
                  Password strength:
                  <span *ngIf="passwordStrength <= 40">Weak</span>
                  <span *ngIf="passwordStrength > 40 && passwordStrength <= 80">Medium</span>
                  <span *ngIf="passwordStrength > 80">Strong</span>
                </small>
              </div>

              <!-- Confirm Password Field -->
              <c-input-group class="mb-4 input-field">
                <span cInputGroupText class="input-icon">
                  <svg cIcon name="cilLockLocked"></svg>
                </span>
                <input
                  [(ngModel)]="user.confirmPassword"
                  name="confirmPassword"
                  (input)="checkPasswordMatch()"
                  autoComplete="new-password"
                  cFormControl
                  placeholder="Confirm Password"
                  type="password"
                  required
                  class="input-control"
                />
              </c-input-group>

              <!-- Password Match Error -->
              <div class="alert alert-danger mb-3" *ngIf="submitted && !passwordMatch">
                Passwords do not match!
              </div>

              <!-- Submit Button -->
              <div class="d-grid">
                <button cButton color="gradient" class="register-button">
                  <span *ngIf="!submitted">Create Account</span>
                  <span *ngIf="submitted && passwordMatch">Processing...</span>
                </button>
              </div>

              <!-- Login Link -->
              <div class="text-center mt-4">
                <p class="login-link">Already have an account? <a routerLink="/login">Sign in</a></p>
              </div>
            </form>
          </c-card-body>
        </c-card>
      </c-col>
    </c-row>
  </c-container>
</div>
